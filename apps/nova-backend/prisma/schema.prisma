generator client {
  provider     = "prisma-client"
  output       = "../src/generated/prisma"
  moduleFormat = "cjs"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model models {
  id        Int     @id @default(autoincrement())
  name      String  @db.VarChar(255)
  source_id Int
  sources   sources @relation(fields: [source_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model sources {
  id     Int      @id @default(autoincrement())
  name   String   @db.VarChar(255)
  models models[]
  keys   keys[]
}

model keys {
  id         Int      @id @default(autoincrement())
  source_id  Int
  api_key    String   @db.VarChar(512)
  is_active  Boolean  @default(true)
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt
  sources    sources  @relation(fields: [source_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([source_id])
}
